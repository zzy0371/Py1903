{% extends 'polls/base.html' %}
{% block title %}
登录
{% endblock %}

{% block script %}
    <script src = "/static/js/main.js" ></script>

    <script>
        $(function(){
            $("#id_username").blur(function(){
                $.ajax({
                    type:"get",
                    url:"/checkusername/?username="+$("#id_username").val(),
                    success:function(data){
                        console.log(data);
                        if(data["statecode"]==0)
                        {
                            $("#errorinfo").text(data["error"] )
                        }
                    }

                })
            } )
        })

    </script>

{% endblock %}


{% block body %}

<div>
    <h3>{{errormessage}}</h3>
    <!-- Nav tabs -->
    <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active"><a href="#login" aria-controls="login" role="tab"
                                                  data-toggle="tab">登录</a></li>
        <li role="presentation"><a href="#regist" aria-controls="regist" role="tab" data-toggle="tab">注册</a></li>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="login">
            <form action="{% url 'polls:login' %}" method="post">
                <form>
                    <li id="errorinfo"></li>
                    {% csrf_token %}
                    {{ lf }}
                    <button type="submit" class="btn btn-default">Submit</button>
                </form>
            </form>
        </div>
        <div role="tabpanel" class="tab-pane" id="regist">
            <form action="{% url 'polls:regist' %}" method="post">
                {% csrf_token %}
                {{ rf }}
                <input type="submit" value="注册">
            </form>
        </div>
    </div>

</div>


{% endblock %}



